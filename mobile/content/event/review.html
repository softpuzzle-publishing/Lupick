<!DOCTYPE html>
<html lang="ko" class="html-terms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Lupick</title>
    <link rel="icon" href="../../resources/images/favicon.png">
    <link rel="apple-touch-icon" href="../../resources/images/favicon-152x152.png">
    <link rel="mask-icon" href="../../resources/images/favicon.svg" color="#ffff00">
    <link rel="stylesheet" href="../../resources/plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="../../resources/plugins/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" href="../../resources/plugins/swiper/css/swiper.min.css">
    <link rel="stylesheet" href="../../resources/css/bootstrap.css">
    <link rel="stylesheet" href="../../resources/css/style.css">
    <!-- jQuery -->
    <script src="../../resources/plugins/jquery/jquery.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="../../resources/plugins/jquery-ui/jquery-ui.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../resources/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../resources/plugins/swiper/js/swiper.min.js"></script>
</head>

<body>
    <div class="wrap">
        <div class="container-wrap">
            <div class="hr m-b-30"></div>
            <div class="review-header row justify-content-between m-b-30">
                <div class="col-auto">
                    <h2>실제 구매자 리뷰 <span class="text-sky">2,392</span></h2>
                </div>
                <div class="col-auto">
                    <a href="#none" class="write text-sky">리뷰쓰기</a>
                </div>
            </div>
            <div class="review-graph">
                <div class="rating-item">
                    <div class="bar" style="width: 60%"></div>
                    <p>포장이 꼼꼼해요</p>
                    <span>1,192</span>
                </div>
                <div class="rating-item">
                    <div class="bar" style="width: 45%"></div>
                    <p>조리 식품이 맛있어요</p>
                    <span>836</span>
                </div>
                <div class="rating-item">
                    <div class="bar" style="width: 30%"></div>
                    <p>배송이 빨랐어요</p>
                    <span>622</span>
                </div>
                <div class="rating-item">
                    <div class="bar" style="width: 20%"></div>
                    <p>가격이 합리적이에요</p>
                    <span>292</span>
                </div>
            </div>
            <div class="hr m-t-30 m-b-30"></div>
            <div class="review-sort row justify-content-between m-b-20">
                <div class="col-auto">
                    <div class="new-checkbox">
                        <input type="checkbox" id="onlyPhoto">
                        <label for="onlyPhoto">사진 리뷰만</label>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="sort">
                        <a href="javascript:;" class="active">베스트순</a>
                        <a href="javascript:;">최신순</a>
                    </div>
                    <script>
                        $('.sort > a').click(function(e){
                            e.preventDefault();
                            $(this).addClass('active');
                            $(this).siblings().removeClass('active');
                        });
                    </script>
                </div>
            </div>
            <div class="review-list-item">
                <div class="row">
                    <div class="col">
                        <div class="user m-b-20">
                            <div class="user-profile"><img src="../../resources/images/@event_07.png" alt="티도"></div>
                            <div class="user-info">
                                <div class="name">티도</div>
                                <div class="date">2022.05.20 작성</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto m-t-5">
                        <a href="javascript:;" class="declaration">신고</a>
                    </div>
                </div>
                <div class="review-photos">
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_07.png" alt="">
                            </div>
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_08.png" alt="">
                            </div>
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_06.png" alt="">
                            </div>
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_07.png" alt="">
                            </div>
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_08.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="review-option">[옵션] 감자볶음밥</div>
                <div class="review-content">하나를 둘이서 갈라먹어서 이건 반정도 되는양이에요! 내용물도 큼직큼직하고 양이 많아요. 감자 으깨서 케찹에 비비면 진짜 맛있습니다</div>
                <div class="review-refer-to m-t-15">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-auto">
                            <button type="button" class="btn btn-sm btn-outline-sky btn-refer active">참고</button>
                        </div>
                        <div class="col-auto">
                            <p><strong class="text-sky">108</strong>명이 참고하였습니다.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="review-list-item">
                <div class="row">
                    <div class="col">
                        <div class="user m-b-20">
                            <div class="user-profile"><img src="../../resources/images/@event_07.png" alt="티도"></div>
                            <div class="user-info">
                                <div class="name">티도</div>
                                <div class="date">2022.05.20 작성</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto m-t-5">
                        <a href="javascript:;" class="declaration">신고</a>
                    </div>
                </div>
                <div class="review-option">[옵션] 감자볶음밥</div>
                <div class="review-content">하나를 둘이서 갈라먹어서 이건 반정도 되는양이에요! 내용물도 큼직큼직하고 양이 많아요. 감자 으깨서 케찹에 비비면 진짜 맛있습니다</div>
                <div class="review-refer-to m-t-15">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-auto">
                            <button type="button" class="btn btn-sm btn-outline-sky btn-refer">참고</button>
                        </div>
                        <div class="col-auto">
                            <p><strong class="text-sky">108</strong>명이 참고하였습니다.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="review-list-item">
                <div class="row">
                    <div class="col">
                        <div class="user m-b-20">
                            <div class="user-profile"><img src="../../resources/images/@event_07.png" alt="티도"></div>
                            <div class="user-info">
                                <div class="name">티도</div>
                                <div class="date">2022.05.20 작성</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-auto m-t-5">
                        <a href="javascript:;" class="declaration">신고</a>
                    </div>
                </div>
                <div class="review-photos">
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_07.png" alt="">
                            </div>
                            <div class="swiper-slide">
                                <img src="../../resources/images/Thumbnail_08.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="review-option">[옵션] 햄볶음밥</div>
                <div class="review-content">내용물도 큼직큼직하고 양이 많아요.</div>
                <div class="review-refer-to m-t-15">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-auto">
                            <button type="button" class="btn btn-sm btn-outline-sky btn-refer">참고</button>
                        </div>
                        <div class="col-auto">
                            <p><strong class="text-sky">108</strong>명이 참고하였습니다.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- modal : 리뷰 확대 보기 -->
    <div class="modal modal-full modal-review" id="modal-review" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <button type="button" class="modal-close" aria-label="모달 닫기" data-dismiss="modal"><i class="icon-x-white"></i></button>
                <div class="modal-body">
                    <div class="user">
                        <div class="user-profile"><img src="../../resources/images/@event_07.png" alt="티도"></div>
                        <div class="user-info">
                            <div class="name">티도</div>
                            <div class="date">2022.05.20 작성</div>
                        </div>
                    </div>
                    <div class="review-photos">
                        <div class="swiper-container">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <img src="../../resources/images/Thumbnail_07.png" alt="">
                                </div>
                                <div class="swiper-slide">
                                    <img src="../../resources/images/Thumbnail_08.png" alt="">
                                </div>
                                <div class="swiper-slide">
                                    <img src="../../resources/images/Thumbnail_06.png" alt="">
                                </div>
                                <div class="swiper-slide">
                                    <img src="../../resources/images/Thumbnail_07.png" alt="">
                                </div>
                                <div class="swiper-slide">
                                    <img src="../../resources/images/Thumbnail_08.png" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="swiper-pagination review-swiper-pagination"></div>
                    </div>
                    <div class="review-collapse">
                        <div class="review-option">[옵션] 감자볶음밥</div>
                        <div class="review-content"><span id="reviewContent"></span> <a href="javascript:;" class="more">더보기</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        //포토리뷰 swiper
        var reviewSwiper = [];
        $('.review-list-item .swiper-container').each(function (i) {
            reviewSwiper[i] = new Swiper($(this)[0], {
                slidesPerView: 4.5,
                freeMode: true,
                spaceBetween: 5,
                slidesOffsetBefore: 20,
                slidesOffsetAfter: 20,
            });
        });
        let photoIdx; //클릭한 사진의 인덱스
        $('.review-photos .swiper-slide').on('click', function () {
            photoIdx = $(this).index();
            console.log(photoIdx);
            $('#modal-review').modal('show')
        });

        // 모달이 열릴때 swiper 실행
        $('#modal-review').on('shown.bs.modal', function (event) {
            var reviewSwiper = new Swiper('.modal-review .swiper-container', {
                initialSlide: photoIdx,
                pagination: {
                    el: '.review-swiper-pagination',
                    type: 'bullets',
                },
            });
        })

        //리뷰 내용 100자까지 ... 처리
        const maxLength = 95;
        let str = '하나를 둘이서 갈라먹어서 이건 반정도 되는양이에요! 내용물도 큼직큼직하고 양이 많아요. 감자 으깨서 케찹에 비비면 진짜 맛있습니다. 하나를 둘이서 갈라먹어서 하나를 둘이서 갈라먹어서 이건 반정도 되는양이에요! 내용물도 큼직큼직하고 양이 많아요. 감자 으깨서 케찹에 비비면 진짜 맛있습니다. 하나를 둘이서 갈라먹어서 하나를 둘이서 갈라먹어서 이건 반정도 되는양이에요! 내용물도 큼직큼직하고 양이 많아요. 감자 으깨서 케찹에 비비면 진짜 맛있습니다.'
        let strShort;
        if (str.length > maxLength) {
            strShort = str.substr(0, maxLength - 2) + '...';
            $('#reviewContent').text(strShort);
        } else {
            $('.review-collapse .more').remove();
        }
        $('.review-collapse .more').on('click', function (e) {
            e.preventDefault();
            if (!$('.review-collapse').hasClass('expanded')) {
                $('#reviewContent').text(str);
                $('.review-collapse .more').text('접기');
            } else {
                $('#reviewContent').text(strShort);
                $('.review-collapse .more').text('더보기');
            }
            $('.review-collapse').toggleClass('expanded');
        });

        //참고할게요 toggle
        $('.review-refer-to .btn-refer').on('click', function(){
            $(this).toggleClass('active');
        });
    </script>
</body>

</html>